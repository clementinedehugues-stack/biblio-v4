# Configuration Réseau - Biblio V4
# Ce fichier contient les paramètres réseau pour l'accès local et distant

# ================================
# CONFIGURATION DES PORTS
# ================================

# Port du frontend (Vite dev server)
FRONTEND_PORT=5173

# Port du backend (FastAPI)
BACKEND_PORT=8000

# Port de la base de données PostgreSQL
DATABASE_PORT=5432

# ================================
# CONFIGURATION RÉSEAU
# ================================

# Interface réseau à utiliser (détection automatique par défaut)
# Décommentez et modifiez si nécessaire
# NETWORK_INTERFACE=en0

# Forcer une adresse IP spécifique (optionnel)
# Décommentez et modifiez si nécessaire
# FORCE_LOCAL_IP=192.168.1.100

# ================================
# SÉCURITÉ RÉSEAU
# ================================

# Autoriser l'accès depuis le réseau local (true/false)
ALLOW_NETWORK_ACCESS=true

# Liste des IPs autorisées (vide = toutes les IPs du réseau local)
# Format: "192.168.1.100,192.168.1.101,192.168.1.102"
ALLOWED_IPS=""

# ================================
# CONFIGURATION FRONTEND
# ================================

# Host pour le serveur Vite
# 0.0.0.0 = accessible depuis le réseau
# localhost = accessible uniquement en local
VITE_HOST=0.0.0.0

# ================================
# CONFIGURATION BACKEND
# ================================

# Host pour FastAPI (défini dans docker-compose.yml)
# 0.0.0.0 = accessible depuis le réseau
# 127.0.0.1 = accessible uniquement en local
FASTAPI_HOST=0.0.0.0

# ================================
# DÉTECTION AUTOMATIQUE
# ================================

# Méthodes de détection d'IP (dans l'ordre de priorité)
# 1. Interface WiFi principale (en0 sur macOS)
# 2. Première interface non-localhost
# 3. Recherche dans toutes les interfaces

# Commandes de détection (macOS)
IP_DETECTION_CMD_1="ifconfig en0 | grep 'inet ' | awk '{print \$2}'"
IP_DETECTION_CMD_2="ifconfig | grep 'inet ' | grep -v 127.0.0.1 | awk '{print \$2}' | head -1"

# ================================
# PARE-FEU ET SÉCURITÉ
# ================================

# Message d'avertissement pour le pare-feu
FIREWALL_WARNING=true

# Ports à vérifier pour les conflits
CHECK_PORTS="5173,8000,5432"

# ================================
# INTERFACE UTILISATEUR
# ================================

# Afficher les QR codes si qrencode est installé
SHOW_QR_CODES=true

# Couleurs dans les scripts
USE_COLORS=true

# Niveau de détail des logs
# minimal, normal, verbose
LOG_LEVEL=normal